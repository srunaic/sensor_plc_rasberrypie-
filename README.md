# 가스 설비 안전 모니터링 시스템 (프로젝트 최종 요약) 

본 프로젝트는 현장 가스 설비의 안전을 실시간으로 감시하고, 가스 누출 등 위험 상황 발생 시 자동으로 밸브를 차단(Interlock)하며 관련 이력을 관리하는 통합 모니터링 시스템입니다.

---

##  시스템 개요 및 아키텍처

본 시스템은 데이터 수집부터 시각화까지 3단계 계층 구조로 설계되었습니다.

1.  **PLC 시뮬레이션 계층**: 실제 PLC 하드웨어를 대신하여 가스 농도와 밸브 상태를 생성하며, 자체적인 안전 차단 로직을 수행합니다.
2.  **엣지 및 백엔드 계층 (Edge & Backend)**: 라즈베리파이 역할을 하는 수집기가 Modbus-TCP 프로토콜로 데이터를 읽어오며, FastAPI 백엔드가 이를 수신하여 데이터베이스(SQLite)에 저장하고 실시간으로 방송합니다.
3.  **웹 모니터링 계층 (Web UI)**: 현장 관리자가 브라우저를 통해 실시간 수치와 밸브 상태를 모니터링할 수 있는 대시보드입니다.

---

##  주요 구현 기능

### 1. 정밀 가스 안전 시뮬레이션
- **현실적인 데이터 생성**: 평상시 안정적인 수치와 무작위 가스 누출 시나리오를 시뮬레이션합니다.
- **자동 인터락(Interlock) 로직**: 가스 농도가 설정치(40 PPM)를 초과하면 PLC 레벨에서 즉시 밸브를 차단(FAULT 상태)합니다.
- **자동 복구 프로세스**: 가스 농도가 안전 수치로 돌아오면 15초의 대기 시간(현장 점검 가정) 후 시스템을 정상으로 복구합니다.

### 2. 실시간 데이터 동기화 및 관리
- **WebSocket 기술 적용**: 서버와 클라이언트 간 지연 없는 실시간 데이터 전송 체계를 구축했습니다.
- **안전 감사 이력(Audit Log)**: 모든 가스 경보, 밸브 차단, 복구 이력을 데이터베이스에 영구 저장하여 사후 사고 분석이 가능하게 했습니다.

### 3. 사용자 중심의 안전 UI (Safety-First UI)
- **고가시성 경보 배너**: 가스 차단 시 화면 상단에 붉은색 사이렌 배너를 노출하여 즉각적인 위험 인지를 돕습니다.
- **상태 위주의 시각화**: 복잡한 수치 분석보다 장비의 현재 상태(정상/경고/위험)를 직관적인 색상으로 표현합니다.
- **읽기 전용 보안 정책**: 안전을 위해 웹 사이트에서의 원격 제어를 배제하고 순수 모니터링 기능에 집중했습니다.

---

##  기술적 해결 과제 (Technical Resolutions)

개발 과정에서 직면한 주요 이슈들을 다음과 같이 해결했습니다.

- **통합 서버 아키텍처 (Unified Server)**: 백엔드와 프론트엔드를 단일 서버 포트(8000)에서 동시에 서비스하도록 고도화하여 배포 및 운영 편의성을 극대화했습니다.
- **CORS 및 동적 호스트 대응**: 다양한 네트워크 환경(Local, IP, 외부 도메인)에서도 통신 거부 없이 안정적으로 연결되도록 호스트 감지 로직을 최적화했습니다.
- **데이터 안정성 확보 (Schema & Logic)**: 가스 센서 수치 추가에 따른 DB 스키마 충돌을 해결하고, 초기 데이터 로딩 시 발생할 수 있는 런타임 에러(null 처리)를 방어 코드로 보강했습니다.

---

##  최종 검증 결과 요약

- [x] **실시간성**: PLC 데이터 생성부터 웹 화면 표시까지 지연 시간 최소화 확인.
- [x] **안전성**: 가스 농도 급증 시 밸브 차단 및 경고 배너 표출의 즉각성 확인.
- [x] **복구력**: 가스 농도 하락 시 정해진 시간(15초) 후 자동 정상화 로직 검증 완료.
- [x] **이력 관리**: 모든 센서값 및 이벤트의 SQLite DB 정상 기록 확인.
- [x] **배포 안정성**: CI/CD 파이프라인을 통한 웹 인터페이스 배포 체계 구축 완료.
